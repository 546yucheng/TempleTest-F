import { Component } from '@angular/core';

@Component({
  selector: 'app-forumstory',
  templateUrl: './forumstory.component.html',
  styleUrls: ['./forumstory.component.css']
})
export class ForumstoryComponent {







  // 假資料，每個標籤 14 筆
  posts: any[] = [
    // 商品心得
    { 標題: '午夜公車的恐怖經歷', 作者: 'user501', 時間: '2024-11-05', 回覆數: 20, 瀏覽數: 3450, 標籤: '靈異故事分享' },
    { 標題: '鬼月遇到的奇異現象', 作者: 'user502', 時間: '2024-11-06', 回覆數: 18, 瀏覽數: 4300, 標籤: '靈異故事分享' },
    { 標題: '宿舍的詭異聲音', 作者: 'user503', 時間: '2024-11-07', 回覆數: 22, 瀏覽數: 3821, 標籤: '靈異故事分享' },
    { 標題: '老家鬧鬼傳聞的真實性', 作者: 'user504', 時間: '2024-11-08', 回覆數: 30, 瀏覽數: 4152, 標籤: '靈異故事分享' },
    { 標題: '鏡子後的陰影', 作者: 'user505', 時間: '2024-11-09', 回覆數: 25, 瀏覽數: 4785, 標籤: '靈異故事分享' },
    { 標題: '荒郊野外的奇妙遭遇', 作者: 'user506', 時間: '2024-11-10', 回覆數: 15, 瀏覽數: 3680, 標籤: '靈異故事分享' },
    { 標題: '夜路上的神秘腳步聲', 作者: 'user507', 時間: '2024-11-11', 回覆數: 12, 瀏覽數: 2901, 標籤: '靈異故事分享' },
    { 標題: '見到不該看的東西', 作者: 'user508', 時間: '2024-11-12', 回覆數: 28, 瀏覽數: 4025, 標籤: '靈異故事分享' },
    { 標題: '夢裡的陌生人', 作者: 'user509', 時間: '2024-11-13', 回覆數: 18, 瀏覽數: 3220, 標籤: '靈異故事分享' },
    { 標題: '無法解釋的家族故事', 作者: 'user510', 時間: '2024-11-14', 回覆數: 17, 瀏覽數: 3522, 標籤: '靈異故事分享' },
    { 標題: '老舊醫院的陰影', 作者: 'user511', 時間: '2024-11-15', 回覆數: 13, 瀏覽數: 3278, 標籤: '靈異故事分享' },
    { 標題: '廢棄校園的靈異故事', 作者: 'user512', 時間: '2024-11-16', 回覆數: 21, 瀏覽數: 3864, 標籤: '靈異故事分享' },
    { 標題: '誤入禁地的驚魂夜', 作者: 'user513', 時間: '2024-11-17', 回覆數: 19, 瀏覽數: 3450, 標籤: '靈異故事分享' },
    { 標題: '電梯裡的陌生人', 作者: 'user514', 時間: '2024-11-18', 回覆數: 24, 瀏覽數: 3680, 標籤: '靈異故事分享' },
    { 標題: '不該打開的門', 作者: 'user515', 時間: '2024-11-19', 回覆數: 14, 瀏覽數: 3002, 標籤: '靈異故事分享' },
    { 標題: '第一次參加收驚儀式的體驗', 作者: 'user601', 時間: '2024-11-05', 回覆數: 10, 瀏覽數: 2100, 標籤: '收驚儀式' },
    { 標題: '收驚需要注意的事項', 作者: 'user602', 時間: '2024-11-06', 回覆數: 12, 瀏覽數: 2150, 標籤: '收驚儀式' },
    { 標題: '收驚的傳統習俗', 作者: 'user603', 時間: '2024-11-07', 回覆數: 18, 瀏覽數: 2400, 標籤: '收驚儀式' },
    { 標題: '給小朋友的收驚經驗分享', 作者: 'user604', 時間: '2024-11-08', 回覆數: 16, 瀏覽數: 2205, 標籤: '收驚儀式' },
    { 標題: '老人家傳授的收驚方法', 作者: 'user605', 時間: '2024-11-09', 回覆數: 15, 瀏覽數: 2300, 標籤: '收驚儀式' },
    { 標題: '收驚是否真的有效？', 作者: 'user606', 時間: '2024-11-10', 回覆數: 22, 瀏覽數: 2500, 標籤: '收驚儀式' },
    { 標題: '收驚與靈異經歷的關聯', 作者: 'user607', 時間: '2024-11-11', 回覆數: 19, 瀏覽數: 2650, 標籤: '收驚儀式' },
    { 標題: '正確的收驚方式是什麼？', 作者: 'user608', 時間: '2024-11-12', 回覆數: 20, 瀏覽數: 2380, 標籤: '收驚儀式' },
    { 標題: '傳統收驚流程介紹', 作者: 'user609', 時間: '2024-11-13', 回覆數: 17, 瀏覽數: 2295, 標籤: '收驚儀式' },
    { 標題: '收驚常用的物品介紹', 作者: 'user610', 時間: '2024-11-14', 回覆數: 13, 瀏覽數: 2105, 標籤: '收驚儀式' },
    { 標題: '收驚的禁忌與文化', 作者: 'user611', 時間: '2024-11-15', 回覆數: 21, 瀏覽數: 2480, 標籤: '收驚儀式' },
    { 標題: '收驚與安神的方法', 作者: 'user612', 時間: '2024-11-16', 回覆數: 18, 瀏覽數: 2375, 標籤: '收驚儀式' },
    { 標題: '不同地區的收驚習俗', 作者: 'user613', 時間: '2024-11-17', 回覆數: 20, 瀏覽數: 2520, 標籤: '收驚儀式' },
    { 標題: '夜晚的收驚經歷', 作者: 'user614', 時間: '2024-11-18', 回覆數: 12, 瀏覽數: 2155, 標籤: '收驚儀式' },
    { 標題: '親友分享的收驚故事', 作者: 'user615', 時間: '2024-11-19', 回覆數: 14, 瀏覽數: 2275, 標籤: '收驚儀式' },
    { 標題: '夜空中出現不明光球', 作者: 'user701', 時間: '2024-11-05', 回覆數: 14, 瀏覽數: 3421, 標籤: '神秘現象' },
    { 標題: '古井傳出的奇怪聲音', 作者: 'user702', 時間: '2024-11-06', 回覆數: 19, 瀏覽數: 4123, 標籤: '神秘現象' },
    { 標題: '房間裡的莫名低語', 作者: 'user703', 時間: '2024-11-07', 回覆數: 22, 瀏覽數: 3958, 標籤: '神秘現象' },
    { 標題: '森林中的消失道路', 作者: 'user704', 時間: '2024-11-08', 回覆數: 15, 瀏覽數: 3624, 標籤: '神秘現象' },
    { 標題: '老照片中的神秘身影', 作者: 'user705', 時間: '2024-11-09', 回覆數: 18, 瀏覽數: 4330, 標籤: '神秘現象' },
    { 標題: '夢境與現實的連結', 作者: 'user706', 時間: '2024-11-10', 回覆數: 20, 瀏覽數: 3812, 標籤: '神秘現象' },
    { 標題: '屋裡莫名的腳步聲', 作者: 'user707', 時間: '2024-11-11', 回覆數: 16, 瀏覽數: 3120, 標籤: '神秘現象' },
    { 標題: '樹林中的陰影', 作者: 'user708', 時間: '2024-11-12', 回覆數: 25, 瀏覽數: 4823, 標籤: '神秘現象' },
    { 標題: '陌生人出現於夢中', 作者: 'user709', 時間: '2024-11-13', 回覆數: 17, 瀏覽數: 3560, 標籤: '神秘現象' },
    { 標題: '無人區的怪異聲響', 作者: 'user710', 時間: '2024-11-14', 回覆數: 21, 瀏覽數: 4221, 標籤: '神秘現象' },
    { 標題: '老屋中的冷風吹來', 作者: 'user711', 時間: '2024-11-15', 回覆數: 14, 瀏覽數: 3198, 標籤: '神秘現象' },
    { 標題: '斷電時看到的怪異影像', 作者: 'user712', 時間: '2024-11-16', 回覆數: 18, 瀏覽數: 3765, 標籤: '神秘現象' },
    { 標題: '窗外頻繁閃爍的光芒', 作者: 'user713', 時間: '2024-11-17', 回覆數: 20, 瀏覽數: 4012, 標籤: '神秘現象' },
    { 標題: '房間鏡子裡的異象', 作者: 'user714', 時間: '2024-11-18', 回覆數: 26, 瀏覽數: 4535, 標籤: '神秘現象' },
    { 標題: '樓梯間無故的哭聲', 作者: 'user715', 時間: '2024-11-19', 回覆數: 13, 瀏覽數: 2921, 標籤: '神秘現象' },
    { 標題: '農村婚禮的傳統習俗', 作者: 'user801', 時間: '2024-11-05', 回覆數: 14, 瀏覽數: 3100, 標籤: '地方習俗' },
    { 標題: '端午節的特殊風俗', 作者: 'user802', 時間: '2024-11-06', 回覆數: 18, 瀏覽數: 3500, 標籤: '地方習俗' },
    { 標題: '中秋節拜月的故事', 作者: 'user803', 時間: '2024-11-07', 回覆數: 12, 瀏覽數: 2800, 標籤: '地方習俗' },
    { 標題: '祭祖文化的意義', 作者: 'user804', 時間: '2024-11-08', 回覆數: 20, 瀏覽數: 4200, 標籤: '地方習俗' },
    { 標題: '農曆新年的傳統活動', 作者: 'user805', 時間: '2024-11-09', 回覆數: 25, 瀏覽數: 4800, 標籤: '地方習俗' },
    { 標題: '元宵節的燈會習俗', 作者: 'user806', 時間: '2024-11-10', 回覆數: 10, 瀏覽數: 2600, 標籤: '地方習俗' },
    { 標題: '清明節掃墓的傳統', 作者: 'user807', 時間: '2024-11-11', 回覆數: 15, 瀏覽數: 3300, 標籤: '地方習俗' },
    { 標題: '七夕節的浪漫傳說', 作者: 'user808', 時間: '2024-11-12', 回覆數: 8, 瀏覽數: 2400, 標籤: '地方習俗' },
    { 標題: '重陽節登高的由來', 作者: 'user809', 時間: '2024-11-13', 回覆數: 13, 瀏覽數: 2900, 標籤: '地方習俗' },
    { 標題: '客家人的傳統風俗', 作者: 'user810', 時間: '2024-11-14', 回覆數: 16, 瀏覽數: 3700, 標籤: '地方習俗' },
    { 標題: '漁村的祭海儀式', 作者: 'user811', 時間: '2024-11-15', 回覆數: 11, 瀏覽數: 2700, 標籤: '地方習俗' },
    { 標題: '苗族的花山節慶典', 作者: 'user812', 時間: '2024-11-16', 回覆數: 19, 瀏覽數: 3900, 標籤: '地方習俗' },
    { 標題: '藏族的天葬文化', 作者: 'user813', 時間: '2024-11-17', 回覆數: 22, 瀏覽數: 4500, 標籤: '地方習俗' },
    { 標題: '傣族潑水節的歡樂時光', 作者: 'user814', 時間: '2024-11-18', 回覆數: 17, 瀏覽數: 3800, 標籤: '地方習俗' },
    { 標題: '鄉村廟會的熱鬧景象', 作者: 'user815', 時間: '2024-11-19', 回覆數: 13, 瀏覽數: 3100, 標籤: '地方習俗' },
    
  ];

  currentTag: string = '收驚趣聞';
  currentPage: number = 1;
  itemsPerPage: number = 5;
  randomPosts: any[] = [];
  ngOnInit(): void {
    this.filterPosts(this.currentTag);
    this.displayRandomPosts();  // 在初始化時顯示隨機貼文
  }

  // 過濾貼文
  filterPosts(tag: string) {
    console.log('rttt')
    this.currentTag = tag;
    this.currentPage = 1;
    this.renderPosts();
  }
  // 渲染隨機貼文
  displayRandomPosts() {
    const randomPostsContainer: any = document.getElementById('randomPostsContainer');
    randomPostsContainer.innerHTML = '';
  
 // 隨機選取5篇貼文
 this.randomPosts = this.getRandomPosts(5);

 this.randomPosts.forEach(post => {
   const postDiv = document.createElement('div');
   postDiv.className = 'single_review';
   postDiv.innerHTML = `
     <div class="img">
         <img src="/assets/images/default.jpg" alt="Reviewer" class="img-fluid w-100">
     </div>
     <div class="text">
         <h4><a href="#">${post.標題}</a></h4> <span>${post.時間}</span>
         <p>作者: ${post.作者} | 回覆: ${post.回覆數} | 瀏覽: ${post.瀏覽數}</p>
     </div>
   `;
   randomPostsContainer.appendChild(postDiv);
 });
}

// 隨機選取 n 篇貼文
getRandomPosts(n: number): any[] {
 const shuffled = [...this.posts].sort(() => 0.5 - Math.random());
 return shuffled.slice(0, n);
}
  // 渲染貼文
  renderPosts() {
    const filteredPosts = this.posts.filter(post => post.標籤 === this.currentTag);
    const startIndex = (this.currentPage - 1) * this.itemsPerPage;
    const paginatedPosts = filteredPosts.slice(startIndex, startIndex + this.itemsPerPage);

    const postContainer: any = document.getElementById('postContainer');
    postContainer.innerHTML = '';


    paginatedPosts.forEach(post => {
      const postDiv = document.createElement('div');
      postDiv.className = 'single_review';
      postDiv.innerHTML = `
                  <div class="img">
                      <img src="/assets/images/default.jpg" alt="Reviewer" class="img-fluid w-100">
                  </div>
                  <div class="text">
                      <h4><a href="#">${post.標題}</a></h4> <span>${post.時間}</span>
                      <p>作者: ${post.作者} | 回覆: ${post.回覆數} | 瀏覽: ${post.瀏覽數}</p>
                  </div>
              `;
      postContainer.appendChild(postDiv);
    });
    const pageDisplay: any = document.getElementById('pageDisplay')

    pageDisplay.innerText = this.currentPage;


      // // 切換頁面
      // changePage(direction) {
      //   const filteredPosts = posts.filter(post => post.標籤 === currentTag);
      //   const totalPages = Math.ceil(filteredPosts.length / itemsPerPage);
      //   currentPage = Math.min(Math.max(1, currentPage + direction), totalPages);
      //   renderPosts();
      // }

    // // 初次渲染
    // document.addEventListener('DOMContentLoaded', () => {
    //   renderPosts();
    // });

  }
}