import { Component } from '@angular/core';

@Component({
  selector: 'app-forumlight',
  templateUrl: './forumlight.component.html',
  styleUrls: ['./forumlight.component.css']
})
export class ForumlightComponent {

  

  // 假資料，每個標籤 14 筆
  posts: any[] = [
    // 商品心得
    { 標題: '新年點燈祈福的奇妙體驗', 作者: 'user123', 時間: '2024-11-01', 回覆數: 8, 瀏覽數: 2103, 標籤: '祈福平安' },
    { 標題: '祈求家人平安的點燈分享', 作者: 'user456', 時間: '2024-11-05', 回覆數: 12, 瀏覽數: 3274, 標籤: '祈福平安' },
    { 標題: '如何選擇適合的點燈廟宇？', 作者: 'user789', 時間: '2024-11-08', 回覆數: 6, 瀏覽數: 1892, 標籤: '祈福平安' },
    { 標題: '一盞燈的力量：祈求平安心安', 作者: 'user222', 時間: '2024-11-10', 回覆數: 15, 瀏覽數: 1423, 標籤: '祈福平安' },
    { 標題: '點燈祈福，心境的轉變', 作者: 'user333', 時間: '2024-11-12', 回覆數: 9, 瀏覽數: 2890, 標籤: '祈福平安' },
    { 標題: '點燈後感受到生活中的小奇蹟', 作者: 'user444', 時間: '2024-11-15', 回覆數: 5, 瀏覽數: 1240, 標籤: '祈福平安' },
    { 標題: '平安燈的祈福意義', 作者: 'user555', 時間: '2024-11-16', 回覆數: 7, 瀏覽數: 1430, 標籤: '祈福平安' },
    { 標題: '今年點燈感受到特別的加持', 作者: 'user666', 時間: '2024-11-18', 回覆數: 13, 瀏覽數: 2123, 標籤: '祈福平安' },
    { 標題: '點燈祈福，帶來意想不到的福報', 作者: 'user777', 時間: '2024-11-20', 回覆數: 11, 瀏覽數: 3210, 標籤: '祈福平安' },
    { 標題: '點燈祈求平安的心得分享', 作者: 'user888', 時間: '2024-11-21', 回覆數: 16, 瀏覽數: 1872, 標籤: '祈福平安' },
    { 標題: '點燈後的生活感悟', 作者: 'user999', 時間: '2024-11-23', 回覆數: 10, 瀏覽數: 1675, 標籤: '祈福平安' },
    { 標題: '為家人點燈祈求平安', 作者: 'user101', 時間: '2024-11-24', 回覆數: 14, 瀏覽數: 1985, 標籤: '祈福平安' },
    { 標題: '第一次點燈祈求平安的經歷', 作者: 'user202', 時間: '2024-11-25', 回覆數: 4, 瀏覽數: 1390, 標籤: '祈福平安' },
    { 標題: '點燈祈福的正確方法分享', 作者: 'user303', 時間: '2024-11-26', 回覆數: 9, 瀏覽數: 1860, 標籤: '祈福平安' },
    { 標題: '點燈祈福是否真的有效？', 作者: 'user404', 時間: '2024-11-27', 回覆數: 8, 瀏覽數: 2025, 標籤: '祈福平安' },
    { 標題: '各地點燈儀式的差異', 作者: 'user111', 時間: '2024-11-01', 回覆數: 6, 瀏覽數: 1300, 標籤: '點燈儀式' },
    { 標題: '參加廟宇點燈儀式的心得', 作者: 'user112', 時間: '2024-11-03', 回覆數: 9, 瀏覽數: 2400, 標籤: '點燈儀式' },
    { 標題: '家庭點燈儀式的步驟', 作者: 'user113', 時間: '2024-11-04', 回覆數: 10, 瀏覽數: 1250, 標籤: '點燈儀式' },
    { 標題: '點燈儀式的意義分析', 作者: 'user114', 時間: '2024-11-05', 回覆數: 11, 瀏覽數: 1670, 標籤: '點燈儀式' },
    { 標題: '適合的點燈時間選擇', 作者: 'user115', 時間: '2024-11-06', 回覆數: 5, 瀏覽數: 1150, 標籤: '點燈儀式' },
    { 標題: '點燈儀式該如何準備', 作者: 'user116', 時間: '2024-11-07', 回覆數: 8, 瀏覽數: 1650, 標籤: '點燈儀式' },
    { 標題: '寺廟的點燈儀式探究', 作者: 'user117', 時間: '2024-11-08', 回覆數: 7, 瀏覽數: 1840, 標籤: '點燈儀式' },
    { 標題: '參與點燈儀式的體驗', 作者: 'user118', 時間: '2024-11-09', 回覆數: 12, 瀏覽數: 2290, 標籤: '點燈儀式' },
    { 標題: '點燈儀式的歷史背景', 作者: 'user119', 時間: '2024-11-10', 回覆數: 4, 瀏覽數: 1100, 標籤: '點燈儀式' },
    { 標題: '點燈儀式的簡單步驟分享', 作者: 'user120', 時間: '2024-11-12', 回覆數: 5, 瀏覽數: 1500, 標籤: '點燈儀式' },
    { 標題: '點燈儀式中的禁忌事項', 作者: 'user121', 時間: '2024-11-13', 回覆數: 3, 瀏覽數: 1750, 標籤: '點燈儀式' },
    { 標題: '夜晚點燈的特別體驗', 作者: 'user122', 時間: '2024-11-14', 回覆數: 10, 瀏覽數: 1630, 標籤: '點燈儀式' },
    { 標題: '點燈儀式的不同形式', 作者: 'user123', 時間: '2024-11-15', 回覆數: 5, 瀏覽數: 1220, 標籤: '點燈儀式' },
    { 標題: '如何為家人進行點燈儀式', 作者: 'user124', 時間: '2024-11-16', 回覆數: 9, 瀏覽數: 2100, 標籤: '點燈儀式' },
    { 標題: '點燈儀式如何準備香燭', 作者: 'user125', 時間: '2024-11-17', 回覆數: 7, 瀏覽數: 1330, 標籤: '點燈儀式' },
    { 標題: '初次供燈的心得分享', 作者: 'user201', 時間: '2024-11-01', 回覆數: 9, 瀏覽數: 1900, 標籤: '供燈心得' },
    { 標題: '供燈帶來的生活改變', 作者: 'user202', 時間: '2024-11-02', 回覆數: 10, 瀏覽數: 2150, 標籤: '供燈心得' },
    { 標題: '在廟宇供燈的感動經歷', 作者: 'user203', 時間: '2024-11-03', 回覆數: 12, 瀏覽數: 1820, 標籤: '供燈心得' },
    { 標題: '供燈讓心靈平靜', 作者: 'user204', 時間: '2024-11-05', 回覆數: 5, 瀏覽數: 1120, 標籤: '供燈心得' },
    { 標題: '供燈是否真的有效？', 作者: 'user205', 時間: '2024-11-06', 回覆數: 8, 瀏覽數: 1530, 標籤: '供燈心得' },
    { 標題: '點燈與供燈的區別', 作者: 'user206', 時間: '2024-11-07', 回覆數: 4, 瀏覽數: 900, 標籤: '供燈心得' },
    { 標題: '為健康而供燈的感受', 作者: 'user207', 時間: '2024-11-08', 回覆數: 6, 瀏覽數: 1350, 標籤: '供燈心得' },
    { 標題: '供燈儀式的準備', 作者: 'user208', 時間: '2024-11-09', 回覆數: 3, 瀏覽數: 1000, 標籤: '供燈心得' },
    { 標題: '供燈的好處與意義', 作者: 'user209', 時間: '2024-11-10', 回覆數: 11, 瀏覽數: 2300, 標籤: '供燈心得' },
    { 標題: '供燈後的身心感悟', 作者: 'user210', 時間: '2024-11-12', 回覆數: 9, 瀏覽數: 1420, 標籤: '供燈心得' },
    { 標題: '如何為家人供燈', 作者: 'user211', 時間: '2024-11-13', 回覆數: 6, 瀏覽數: 1290, 標籤: '供燈心得' },
    { 標題: '供燈儀式有哪些注意事項？', 作者: 'user212', 時間: '2024-11-15', 回覆數: 7, 瀏覽數: 1670, 標籤: '供燈心得' },
    { 標題: '供燈是否帶來好運？', 作者: 'user213', 時間: '2024-11-16', 回覆數: 8, 瀏覽數: 2100, 標籤: '供燈心得' },
    { 標題: '供燈後生活中發生的好事', 作者: 'user214', 時間: '2024-11-18', 回覆數: 10, 瀏覽數: 2150, 標籤: '供燈心得' },
    { 標題: '供燈的精神意義', 作者: 'user215', 時間: '2024-11-20', 回覆數: 5, 瀏覽數: 1250, 標籤: '供燈心得' },
    { 標題: '點燈後實現的第一個願望', 作者: 'user301', 時間: '2024-11-01', 回覆數: 12, 瀏覽數: 2100, 標籤: '願望實現' },
    { 標題: '願望實現後的生活轉變', 作者: 'user302', 時間: '2024-11-02', 回覆數: 15, 瀏覽數: 2870, 標籤: '願望實現' },
    { 標題: '點燈與願望成真的關聯', 作者: 'user303', 時間: '2024-11-03', 回覆數: 7, 瀏覽數: 1520, 標籤: '願望實現' },
    { 標題: '點燈三年後願望成真', 作者: 'user304', 時間: '2024-11-04', 回覆數: 14, 瀏覽數: 3010, 標籤: '願望實現' },
    { 標題: '點燈如何幫助我實現夢想', 作者: 'user305', 時間: '2024-11-05', 回覆數: 6, 瀏覽數: 1650, 標籤: '願望實現' },
    { 標題: '點燈後生活的變化分享', 作者: 'user306', 時間: '2024-11-07', 回覆數: 8, 瀏覽數: 1850, 標籤: '願望實現' },
    { 標題: '從未想到的願望終於成真', 作者: 'user307', 時間: '2024-11-08', 回覆數: 13, 瀏覽數: 2900, 標籤: '願望實現' },
    { 標題: '點燈幫助我在事業上成功', 作者: 'user308', 時間: '2024-11-09', 回覆數: 9, 瀏覽數: 2500, 標籤: '願望實現' },
    { 標題: '願望成真的秘訣：點燈心法', 作者: 'user309', 時間: '2024-11-11', 回覆數: 8, 瀏覽數: 1940, 標籤: '願望實現' },
    { 標題: '點燈如何幫助我找到幸福', 作者: 'user310', 時間: '2024-11-13', 回覆數: 11, 瀏覽數: 2230, 標籤: '願望實現' },
    { 標題: '點燈願望實現後的喜悅分享', 作者: 'user311', 時間: '2024-11-14', 回覆數: 7, 瀏覽數: 1990, 標籤: '願望實現' },
    { 標題: '點燈後的轉機：願望實現', 作者: 'user312', 時間: '2024-11-15', 回覆數: 10, 瀏覽數: 2350, 標籤: '願望實現' },
    { 標題: '點燈助力：願望成真的故事', 作者: 'user313', 時間: '2024-11-17', 回覆數: 14, 瀏覽數: 2750, 標籤: '願望實現' },
    { 標題: '願望達成後的心得分享', 作者: 'user314', 時間: '2024-11-19', 回覆數: 6, 瀏覽數: 1680, 標籤: '願望實現' },
    { 標題: '點燈祈願的靈驗案例', 作者: 'user315', 時間: '2024-11-20', 回覆數: 5, 瀏覽數: 1570, 標籤: '願望實現' },
    { 標題: '點燈祈求家人健康的經歷', 作者: 'user401', 時間: '2024-11-01', 回覆數: 10, 瀏覽數: 1900, 標籤: '祈求健康' },
    { 標題: '祈求父母健康的供燈心得', 作者: 'user402', 時間: '2024-11-02', 回覆數: 7, 瀏覽數: 1600, 標籤: '祈求健康' },
    { 標題: '點燈祈求健康：我的心路歷程', 作者: 'user403', 時間: '2024-11-03', 回覆數: 6, 瀏覽數: 1250, 標籤: '祈求健康' },
    { 標題: '點燈後身體改善的故事', 作者: 'user404', 時間: '2024-11-04', 回覆數: 8, 瀏覽數: 1600, 標籤: '祈求健康' },
    { 標題: '如何透過供燈祈求健康', 作者: 'user405', 時間: '2024-11-05', 回覆數: 9, 瀏覽數: 1700, 標籤: '祈求健康' },
    { 標題: '供燈後病情好轉的案例', 作者: 'user406', 時間: '2024-11-06', 回覆數: 11, 瀏覽數: 2200, 標籤: '祈求健康' },
    { 標題: '點燈儀式與健康祈願', 作者: 'user407', 時間: '2024-11-07', 回覆數: 7, 瀏覽數: 2100, 標籤: '祈求健康' },
    { 標題: '健康點燈經歷分享', 作者: 'user408', 時間: '2024-11-08', 回覆數: 12, 瀏覽數: 1800, 標籤: '祈求健康' },
    { 標題: '點燈祈福幫助健康改善', 作者: 'user409', 時間: '2024-11-09', 回覆數: 5, 瀏覽數: 1300, 標籤: '祈求健康' },
    { 標題: '長期點燈對健康的影響', 作者: 'user410', 時間: '2024-11-10', 回覆數: 6, 瀏覽數: 1400, 標籤: '祈求健康' },
    { 標題: '供燈祈求健康的神奇效果', 作者: 'user411', 時間: '2024-11-12', 回覆數: 13, 瀏覽數: 2250, 標籤: '祈求健康' },
    { 標題: '供燈後的身體變化', 作者: 'user412', 時間: '2024-11-13', 回覆數: 9, 瀏覽數: 1750, 標籤: '祈求健康' },
    { 標題: '健康供燈祈求的具體步驟', 作者: 'user413', 時間: '2024-11-14', 回覆數: 8, 瀏覽數: 1550, 標籤: '祈求健康' },
    { 標題: '供燈祈福是否有效？', 作者: 'user414', 時間: '2024-11-15', 回覆數: 7, 瀏覽數: 1300, 標籤: '祈求健康' },
    { 標題: '點燈祈願帶來的健康改善', 作者: 'user415', 時間: '2024-11-17', 回覆數: 6, 瀏覽數: 1250, 標籤: '祈求健康' }
    // ...繼續添加其他標籤的假資料
  ];

  currentTag: string = '商品心得';
  currentPage: number = 1;
  itemsPerPage: number = 5;
  randomPosts: any[] = [];
  ngOnInit(): void {
    this.filterPosts(this.currentTag);
    this.displayRandomPosts();  // 在初始化時顯示隨機貼文
  }

  // 過濾貼文
  filterPosts(tag: string) {
    console.log('rttt')
    this.currentTag = tag;
    this.currentPage = 1;
    this.renderPosts();
  }
  // 渲染隨機貼文
  displayRandomPosts() {
    const randomPostsContainer: any = document.getElementById('randomPostsContainer');
    randomPostsContainer.innerHTML = '';
  
 // 隨機選取5篇貼文
 this.randomPosts = this.getRandomPosts(5);

 this.randomPosts.forEach(post => {
   const postDiv = document.createElement('div');
   postDiv.className = 'single_review';
   postDiv.innerHTML = `
     <div class="img">
         <img src="/assets/images/default.jpg" alt="Reviewer" class="img-fluid w-100">
     </div>
     <div class="text">
         <h4><a href="#">${post.標題}</a></h4> <span>${post.時間}</span>
         <p>作者: ${post.作者} | 回覆: ${post.回覆數} | 瀏覽: ${post.瀏覽數}</p>
     </div>
   `;
   randomPostsContainer.appendChild(postDiv);
 });
}

// 隨機選取 n 篇貼文
getRandomPosts(n: number): any[] {
 const shuffled = [...this.posts].sort(() => 0.5 - Math.random());
 return shuffled.slice(0, n);
}
  // 渲染貼文
  renderPosts() {
    const filteredPosts = this.posts.filter(post => post.標籤 === this.currentTag);
    const startIndex = (this.currentPage - 1) * this.itemsPerPage;
    const paginatedPosts = filteredPosts.slice(startIndex, startIndex + this.itemsPerPage);

    const postContainer: any = document.getElementById('postContainer');
    postContainer.innerHTML = '';


    paginatedPosts.forEach(post => {
      const postDiv = document.createElement('div');
      postDiv.className = 'single_review';
      postDiv.innerHTML = `
                  <div class="img">
                      <img src="/assets/images/default.jpg" alt="Reviewer" class="img-fluid w-100">
                  </div>
                  <div class="text">
                      <h4><a href="#">${post.標題}</a></h4> <span>${post.時間}</span>
                      <p>作者: ${post.作者} | 回覆: ${post.回覆數} | 瀏覽: ${post.瀏覽數}</p>
                  </div>
              `;
      postContainer.appendChild(postDiv);
    });
    const pageDisplay: any = document.getElementById('pageDisplay')

    pageDisplay.innerText = this.currentPage;


      // // 切換頁面
      // changePage(direction) {
      //   const filteredPosts = posts.filter(post => post.標籤 === currentTag);
      //   const totalPages = Math.ceil(filteredPosts.length / itemsPerPage);
      //   currentPage = Math.min(Math.max(1, currentPage + direction), totalPages);
      //   renderPosts();
      // }

    // // 初次渲染
    // document.addEventListener('DOMContentLoaded', () => {
    //   renderPosts();
    // });

  }
}